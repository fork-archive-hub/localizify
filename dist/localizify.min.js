!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.localizify=e():t.localizify=e()}("undefined"!=typeof window?window:this,function(){return o={},r.m=n=[function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var c,s,a=n(1),u=n(2);(s=c=e.EventTypes||(e.EventTypes={})).ChangeLocale="CHANGE_LOCALE",s.TranslationNotFound="TRANSLATION_NOT_FOUND",s.ReplacedDataNotFound="REPLACED_DATA_NOT_FOUND";var l,p=(l=u.EventEmitter,r(f,l),f.prototype.getStore=function(){return this.store},f.prototype.getLocale=function(){return this.getStore().locale},f.prototype.setLocale=function(t){var e=this.getStore().locale;return this.isLocale(t)&&e!==t&&(this.getStore().locale=t,this.emit(c.ChangeLocale,t,e)),this},f.prototype.isLocale=function(t){return-1!==this.getStore().localesList.indexOf(t)},f.prototype.onLocaleChange=function(t){return this.on(c.ChangeLocale,t),t},f.prototype.onTranslationNotFound=function(t){this.on(c.TranslationNotFound,t)},f.prototype.onReplacedDataNotFound=function(t){this.on(c.ReplacedDataNotFound,t)},f.prototype.setDefaultScope=function(t){return this.getStore().scope=t,this},f.prototype.clearDefaultScope=function(){return this.getStore().scope=null,this},f.prototype.registerInterpolations=function(t){return Object.assign(this.getStore().interpolations,t),this},f.prototype.add=function(t,e,n){var o=this.getStore(),r=e;return n&&((r={})[e]=n),this.isLocale(t)||o.localesList.push(t),o.translations[t]=i(i({},o.translations[t]),r),o.normalizedKeys[t]=i(i({},o.normalizedKeys[t]),a.normalize(r)),this},f.prototype.detectLocale=function(t){var e=t;if(a.isBrowser()&&!e&&(e=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage),!e)return!1;var n=e.toLowerCase().split(/[_-]+/)[0];return!!this.isLocale(n)&&n},f.prototype.replaceData=function(o,r){var i=this,s=o;return(s.match(/\{(.*?)\}/gi)||[]).forEach(function(t){var e=t.replace(/[{}]/gi,""),n=[r[e],i.getStore().interpolations[e],t].find(function(t){return void 0!==t});n===t&&i.emit(c.ReplacedDataNotFound,o,t,r),s=s.replace(t,n)}),s},f.prototype.translate=function(t,e){if(void 0===e&&(e={}),!t)throw new Error('"key" param is required');var n=e.locale,o=e.scope,r=void 0===o?this.getStore().scope:o,i=this.isLocale(n)&&n||this.getStore().locale;if(!i)throw new Error("Current locale is not defined");var s=this.getStore().normalizedKeys[i],a=(r?r+".":"")+t,u=s&&s[a];return u||this.emit(c.TranslationNotFound,i,t,r),this.replaceData(u?s[a]:t,e)},f);function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.store={locale:"en",localesList:["en"],scope:null,translations:{},interpolations:{},normalizedKeys:{},separator:"."},t}e.Localizify=p;var h=new(e.Instance=p),d=h.translate.bind(h);e.t=d,e.default=h},function(t,r,e){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,r++)o[r]=i[s];return o};Object.defineProperty(r,"__esModule",{value:!0});r.normalize=function(e,n,o){var t;return void 0===n&&(n=[]),void 0===o&&(o={}),"string"==typeof e?o[n.join(".")]=e:null!==(t=e)&&"[object Object]"===Object.prototype.toString.call(t)&&Object.keys(e).forEach(function(t){r.normalize(e[t],i(n,[t]),o)}),o},r.isBrowser=function(){return"undefined"!=typeof window&&window.document&&window.document.createElement}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(r.prototype.getListeners=function(t){return this.listeners[t]||[]},r.prototype.on=function(t,e){if("function"!=typeof e)throw new TypeError("Listener must be a function");return-1===this.getListeners(t).indexOf(e)&&(this.hasListeners(t)||(this.listeners[t]=[]),this.listeners[t].push(e)),e},r.prototype.off=function(t,e){if(this.hasListeners(t)){var n=this.getListeners(t);this.listeners[t]=n.filter(function(t){return e!==t})}return this},r.prototype.emit=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.getListeners(t).forEach(function(t){return t.apply(e,n)}),this},r.prototype.hasListeners=function(t){return 0<this.getListeners(t).length},r);function r(){this.listeners={}}e.EventEmitter=o}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0);function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o});